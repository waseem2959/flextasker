#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "🔍 Running pre-commit checks..."

# Run ESLint on staged files
echo "📝 Linting staged files..."
npx lint-staged

# Type check
echo "🔎 Type checking..."
npx tsc --noEmit

# Verify no secrets are being committed
echo "🔒 Checking for secrets..."
npx secretlint --glob "**/*"

# Check for conventional commit message format
echo "📝 Validating commit message..."
npx commitlint --edit $1

echo "✅ All checks passed!"
